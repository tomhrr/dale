#!/usr/bin/perl

use warnings;
use strict;
my $test_dir = $ENV{"DALE_TEST_DIR"} || ".";
$ENV{PATH} .= ":.";

use Data::Dumper;
use Test::More tests => 3;

my @res = `dalec $ENV{"DALE_TEST_ARGS"} $test_dir/t/src/md-arrays.dt -o md-arrays  `;
is(@res, 0, 'No compilation errors');

@res = `./md-arrays`;
is($?, 0, 'Program executed successfully');

chomp for @res;

is_deeply(\@res, [qw(
0
1
2
3
4
5
6
7
8
9
0
0
0
0
0
0
0
0
0
0
0
1
2
3
4
5
6
7
8
9
0
2
4
6
8
10
12
14
16
18
0
3
6
9
12
15
18
21
24
27
0
4
8
12
16
20
24
28
32
36
0
5
10
15
20
25
30
35
40
45
0
6
12
18
24
30
36
42
48
54
0
7
14
21
28
35
42
49
56
63
0
8
16
24
32
40
48
56
64
72
0
9
18
27
36
45
54
63
72
81
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
0
1
2
3
4
5
6
7
8
9
0
2
4
6
8
10
12
14
16
18
0
3
6
9
12
15
18
21
24
27
0
4
8
12
16
20
24
28
32
36
0
5
10
15
20
25
30
35
40
45
0
6
12
18
24
30
36
42
48
54
0
7
14
21
28
35
42
49
56
63
0
8
16
24
32
40
48
56
64
72
0
9
18
27
36
45
54
63
72
81
0
0
0
0
0
0
0
0
0
0
0
2
4
6
8
10
12
14
16
18
0
4
8
12
16
20
24
28
32
36
0
6
12
18
24
30
36
42
48
54
0
8
16
24
32
40
48
56
64
72
0
10
20
30
40
50
60
70
80
90
0
12
24
36
48
60
72
84
96
108
0
14
28
42
56
70
84
98
112
126
0
16
32
48
64
80
96
112
128
144
0
18
36
54
72
90
108
126
144
162
0
0
0
0
0
0
0
0
0
0
0
3
6
9
12
15
18
21
24
27
0
6
12
18
24
30
36
42
48
54
0
9
18
27
36
45
54
63
72
81
0
12
24
36
48
60
72
84
96
108
0
15
30
45
60
75
90
105
120
135
0
18
36
54
72
90
108
126
144
162
0
21
42
63
84
105
126
147
168
189
0
24
48
72
96
120
144
168
192
216
0
27
54
81
108
135
162
189
216
243
0
0
0
0
0
0
0
0
0
0
0
4
8
12
16
20
24
28
32
36
0
8
16
24
32
40
48
56
64
72
0
12
24
36
48
60
72
84
96
108
0
16
32
48
64
80
96
112
128
144
0
20
40
60
80
100
120
140
160
180
0
24
48
72
96
120
144
168
192
216
0
28
56
84
112
140
168
196
224
252
0
32
64
96
128
160
192
224
256
288
0
36
72
108
144
180
216
252
288
324
0
0
0
0
0
0
0
0
0
0
0
5
10
15
20
25
30
35
40
45
0
10
20
30
40
50
60
70
80
90
0
15
30
45
60
75
90
105
120
135
0
20
40
60
80
100
120
140
160
180
0
25
50
75
100
125
150
175
200
225
0
30
60
90
120
150
180
210
240
270
0
35
70
105
140
175
210
245
280
315
0
40
80
120
160
200
240
280
320
360
0
45
90
135
180
225
270
315
360
405
0
0
0
0
0
0
0
0
0
0
0
6
12
18
24
30
36
42
48
54
0
12
24
36
48
60
72
84
96
108
0
18
36
54
72
90
108
126
144
162
0
24
48
72
96
120
144
168
192
216
0
30
60
90
120
150
180
210
240
270
0
36
72
108
144
180
216
252
288
324
0
42
84
126
168
210
252
294
336
378
0
48
96
144
192
240
288
336
384
432
0
54
108
162
216
270
324
378
432
486
0
0
0
0
0
0
0
0
0
0
0
7
14
21
28
35
42
49
56
63
0
14
28
42
56
70
84
98
112
126
0
21
42
63
84
105
126
147
168
189
0
28
56
84
112
140
168
196
224
252
0
35
70
105
140
175
210
245
280
315
0
42
84
126
168
210
252
294
336
378
0
49
98
147
196
245
294
343
392
441
0
56
112
168
224
280
336
392
448
504
0
63
126
189
252
315
378
441
504
567
0
0
0
0
0
0
0
0
0
0
0
8
16
24
32
40
48
56
64
72
0
16
32
48
64
80
96
112
128
144
0
24
48
72
96
120
144
168
192
216
0
32
64
96
128
160
192
224
256
288
0
40
80
120
160
200
240
280
320
360
0
48
96
144
192
240
288
336
384
432
0
56
112
168
224
280
336
392
448
504
0
64
128
192
256
320
384
448
512
576
0
72
144
216
288
360
432
504
576
648
0
0
0
0
0
0
0
0
0
0
0
9
18
27
36
45
54
63
72
81
0
18
36
54
72
90
108
126
144
162
0
27
54
81
108
135
162
189
216
243
0
36
72
108
144
180
216
252
288
324
0
45
90
135
180
225
270
315
360
405
0
54
108
162
216
270
324
378
432
486
0
63
126
189
252
315
378
441
504
567
0
72
144
216
288
360
432
504
576
648
0
81
162
243
324
405
486
567
648
729
)], 'Got expected results');

`rm md-arrays`;

1;
